!function(n){n.windowMsgHandlers=[],n.initWindowMsg=function(){n("body").append(n('<form name="windowComm"></form>').append(n('<input type="hidden" name="windowCommEvent">')).append(n('<input type="hidden" name="windowCommData">')).append(n('<input id="myinput" type="button" name="windowCommButton" value="" style="display:none">'))),n("#myinput").click(function(){eventType=n("[name=windowCommEvent]").val(),data=n("[name=windowCommData]").val();for(var e=0;e<n.windowMsgHandlers.length;e++)if(h=n.windowMsgHandlers[e],h.event==eventType){h.callback.call(null,data);break}})},n.triggerParentEvent=function(e,o){n.triggerWindowEvent(window.opener,e,o)},n.triggerWindowEvent=function(n,e,o){return"object"==typeof n&&(form=n.document.forms.windowComm,form)?(form.windowCommEvent.value=e,form.windowCommData.value=o,form.windowCommButton.click(),!0):!1},n.windowMsg=function(e,o){n.windowMsgHandlers.push({event:e,callback:o})}}(jQuery);